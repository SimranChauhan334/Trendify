

<!-- 

  <!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
     <title>AJAX Page</title>
 </head>
 <body>
     <script>
         $(document).ready(() => {
             $(".get_button").click(() => {
                 $.ajax({
                     method: 'GET',
                     url: "http://127.0.0.1:8000/api/products/",
                     success: ((res) => {
                         console.log(res.results);
 
                         var data = "";
                         res.results.map((item, index) => {
                             
                             var productId = item.url.split('/').slice(-2, -1)[0];
 
                           
                             data += `
                                 <p>
                                     ${item.product_price}, 
                                     <a href="#" class="product_name" data-id="${productId}">
                                         ${item.product_name}
                                     </a>
                                 </p>`;
                         });
 
                         
                         $(".show_data").html(data);
                     })
                 });
             });
 
            
             $(document).on('click', '.product_name', function (e) {
                 e.preventDefault();
 
                 var productId = $(this).data('id');  
                 console.log("Clicked product ID:", productId);  
                
                 $.ajax({
                     method: "GET",
                     url: `http://127.0.0.1:8000/api/products/${productId}/`,
                     success: (details) => {
                         console.log(details);
 
                         var detailsHtml = `
                             <h3>Product Details</h3>
                             <p>Name: ${details.product_name}</p>
                             <p>Price: ${details.product_price}</p>
                             <p>Description: ${details.product_description}</p>
                         `;
                         $(".product_details").html(detailsHtml); 
                     }
                 });
             });
         });
     </script>
 
     <h1>AJAX Page</h1>
     <input type="button" value="Get Products" class="get_button">
     <div class="show_data"></div>
     <div class="product_details"></div>    
 </body>
 </html>
 -->



  <!-- <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <title>calculate page</title>
  </head>
  <body>
    <script>
        $(document).ready(()=>{
            $(".calculate").click(()=>{
                
                var val1 = parseInt($(".num1").val())
                var val2 = parseInt($(".num2").val())

                var result = val1 + val2

                $(".result").val(result)
            })

            $(".minus").click(()=>{

                var val1 = parseInt($(".num1").val())
                var val2 = parseInt($(".num2").val())

                var result = val1 - val2

                $('.result').val(result)
            })

            $("#multiply").click(()=>{
                var val1 = parseInt($(".num1").val())
                var val2 = parseInt($(".num2").val())

                var result = val1 * val2

                $('.result').val(result)


            })
        })
    </script>
    <h1> calculate page </h1>
    <input type="text" name="num1" class="num1" >
    <input type="text" name="num2" class="num2" >
    <input type="button" class="calculate" value="calculate" >
    <input type="button" class="minus" value="minus">
    <input type="button"  value="multiply" id="multiply">
    <input type="text" name="result" class="result">
    
   
  </body>
  </html>




 -->

  <!-- <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>Ajax</title>
  </head>
  <body>
    <script>
        $(document).ready(()=>{
            $("input[value=plus]").click(()=>{
                var a = parseInt($("input[name=num1]").val())
                var b = parseInt($("input[name=num2]").val())
                var result = a + b

            $("input[name=result]").val(result)

            })

            $("input[value=minus]").click(()=>{
                var a = parseInt($("input[name=num1]").val()) 
                var b = parseInt($("input[name=num2]").val())

                var result = a - b

            $("input[name=result]").val(result)   
            
            
            })

            $("input[value=multiply]").click(()=>{
                var a = parseInt($('input[name=num1]').val())
                var b = parseInt($("input[name=num2]").val())

                var result = a * b

            $("input[name=result]").val(result)    
            })

            $("input[value=divide]").click(()=>{
                var a = parseInt
            })

            


           
            
        })
    </script>
    
    <h1> calculate page</h1>
    
    <input type="text" name="num1">
    <input type="text" name="num2">
    <input type="button"  value="plus">
    <input type="button" value="minus">
    <input type="button" value="multiply">
    <input type="text" name="result">
  </body>
  </html> 


   -->




<!-- 
   <!DOCTYPE html>
   <html lang="en">
   <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>review</title>
   </head>
   <body>
    <h1>add reviews</h1>

    <form id="review-form">
        {% csrf_token %}

        <label for="product_id">Product Id:</label>
        <input type="number" name="product_id" id="product_id"required><br><br>

        <label for="rating">Rating</label>
        <input type="number" name="rating" id="rating"required><br><br>

        <label for="review_text">Review</label>
        <input type="text" name="review_text" id="review_text"required><br><br>

        <input type="button" value="submit" class="Submit">

    </form>

    <script>
        $(document).ready(()=>{
            $('.Submit').click(()=>{

                const productId = $("#product_id").val()
                const rating = $("#rating").val()
                const reviewText = $("#review_text").val()

                const data = {
                    product_id: productId,
                    rating: rating,
                    review_text: reviewText
                }

               

                $.ajax({
                    method : 'POST',
                    url : 'http://127.0.0.1:8000/api/review/',
                    data: JSON.stringify(data), 
                    contentType: 'application/json',
                    headers: {
                        'X-CSRFToken': $("input[name='csrfmiddlewaretoken']").val()  // Send CSRF token in the header
                    },
                    success : (response) =>{
                        alert("Review submitted successfully!")
                        console.log(response)
                    }
                })

            })

        })
    </script>
   </body>
   </html> -->




   <!DOCTYPE html>
   <html lang="en">
   <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>Review Form</title>
   </head>
   <body>
    <h1>Review Form</h1>

    <button id="review">Write a Review</button>

    <div id="container" style="display: none;">
        <h2>Submit your review</h2>
        <form id="review-form">
            {% csrf_token %}

            <label for="product_id">Product Id:</label>
            <input type="number" name="product_id" id="product_id" required><br><br>

            <label for="rating">Rating:</label>
            <input type="number" name="rating" id="rating" required><br><br>

            <label for="review_text">Review:</label>
            <input type="text" name="review_text" id="review_text" required><br><br>

            <input type="button" id="submit-review" value="Submit Review">
        </form>
    </div>

    <script>
        $(document).ready(()=>{
            
            $("#review").click(() => {
               
                $('#container').toggle()
                const btn = $('#container').is(':visible') ? 'Close Review Form' : 'Write a Review';
                $('#review').text(btn)
            })

            $("#submit-review").click(() => {
                
                const productId = $("#product_id").val()
                const rating = $("#rating").val()
                const reviewText = $("#review_text").val()


                // if (!productId || !rating || !reviewText) {
                //     alert("Please fill all the fields.");
                //     return;
                // }

                const data = {
                    product_id: productId,
                    rating: rating,
                    review_text: reviewText
                }

                $.ajax({
                    method : 'POST',
                    url : 'http://127.0.0.1:8000/api/review/',
                    data : JSON.stringify(data),
                    contentType : 'application/json',
                    headers : {
                        'X-CSRFToken': $("input[name='csrfmiddlewaretoken']").val() 
                    },
                    success : (response) =>{
                        alert("Review submitted successfully!");
                        console.log(response)

                        $('#container').hide()
                        $('#review').text('Write a Review')
                    }
                })
                
            })
        })
    </script>
   </body>
   </html>